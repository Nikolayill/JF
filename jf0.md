## Hello world


## Новый класс Greeter
Создадим новый класс с именем Greeter (как в шаге *). Код "пустого" класса будет таким:
```java
package app;

public class Greeter {

}
```
в первой строке указано, что класс расположен в пакете *app*: `package app;`.\
Далее следует объявление класса `public class Greeter`
и пока ещё пустое тело класса (оно заключено между фигурных скобок).

Теперь, что бы добавить в класс простую функциональность добавим, в тело класса код:
```java
    public static String sayHello(String name){
        return "Hello " + name + "!";
    }
```
это определение метода *sayHello* принимающего параметр *name*. 
В методе реализуется простое преобразование строки содержащей имя,
в строку приветствия. К началу исходной строки, добавляется слово "Hello", а в её конец добавляется восклицательный знак.

Теперь, что бы воспользоваться созданным методом, мы должны его вызвать из основной программы.
Модифицируем код в методе *main* класса *Hello*:
```java
    public static void main(String[] args) {
        String message = Greeter.sayHello("planet");
        
		System.out.println(message);
    }
```
теперь сообщение выводимое на экран формируется в методе *sayHello*. В строке `String message = Greeter.sayHello("planet");`
выполняется вызов этого метода, и возвращаемое значение помещается в переменную *message*.
Затем значение переменной выводится в консоль `System.out.println(message);`

В IntellijIDEA можно сразу запустить программу, для этого в открытой вкладке с классом Hello нужно нажать **Ctrl+Shift+F10**, либо из контекстного меню (правый клик) выбрать `Run 'Hello.main()'`. Результат выполнения должен появиться на вкладке "Run" в нижней части экрана.

Что бы скомпилировать и запустить программу самостоятельно нужно открыть папку проекта ("hello") в консоли и скомпилировать все классы командой:
```
javac src\app\Greeter.java src\app\Hello.java
```
в подкаталоге `src\app\` будет создано два файла *Greeter.class* и *Hello.class*.
Теперь, что бы запустить программу из консоли нужно выполнить команду:
```
java -classpath .\src app.Hello
```
здесь агрумент `-classpath .\src` указывает, что пакеты и классы расположены в каталоге "src", а `app.Hello` говорит, что
точкой входа в программу (т.е. Main-классом) является класс *Hello* расположенный в пакете *app*, 
и при старте нужно запустить метод *main* данного класса.
При успешном запуске в консоль будет выведено приветствие.

## Упаковка классов. JAR-файл.
Для удобаства распространения и запуска программ, отдельные классы упаковываются в архив с расширением `*.jar`. JAR-файл по сути является обычным zip-архивом, который может содержать как скомпилированный java-байткод в class-файлах, так и любые другие форматы файлов. Таким образом, вместо
множества class-файлов готовая программа будет представлять собой один jar-файл.

При запуске программы из class-файла нам приходилось каждый раз указывать `-classpath` и "точку входа" `app.Hello`, это довольно сложный для пользователя способ
запуска, который упрощается при сборке в jar-файл. Для этого в него можно добавить сразу всю необходимую информацию. В нашем случае необходимо указать только точку входа.\
Эта информация хранится в специальном файле - манифесте. Мы можем добавить в него необходимые параметры. Для этого создадим в каталоге `src` файл
с именем `hello_manifest.txt` и добавим в него строки:
```
Main-Class: app.Hello

```
последняя строка должна быть пустой (просто нажать enter). Здесь `Main-Class: app.Hello` определяет точку входа. Путь `-classpath .\src` указывать не требуется т.к. этот каталог будет корнем архива.\
Теперь нужно перейти в каталог src и собрать jar:
```
cd src
jar cfmv Hello.jar .\hello_manifest.txt .\app\*.class
```
в консоли будет отображено сообщение вида:
```
added manifest
adding: app/Greeter.class(in = 702) (out= 397)(deflated 43%)
adding: app/Hello.class(in = 502) (out= 322)(deflated 35%)
```
это подробный список операций выполненных утилитой `jar`.
В какталоге `src` появится файл `Hello.jar`. 

Первый аргумент команды *jar* - это набор ключей (`cfmv`):
c - указывает, что нужно создать новый jar-файл
f - указывает, что имя jar-файла задается агрументом командной строки (`Hello.jar`)
m - получить манифест из файла (`.\hello_manifest.txt`)
v - отобразить подробный отчет о ходе выполнения
**Если ключь подразумевает, что нужен какой то агрумент (например имя файла), то аргументы должны передаваться в том же порядке, что и ключи.**
далее идут аргументы: имя jar-файла, файл манифеста, и путь к class-файлам. 

Запускать упакованную программу заметно проще - нужно выполнить команду:
```
java -jar Hello.jar
``` 
- в консоль должно быть выведено приветствие.

Посмотреть содержимое `Hello.jar` можно обычным архиватором, например 7zip или WinRar, так же сама утилита jar может отобразить содержимое:
```
jar tf Hello.jar
```
выдаст примерно такой список:
```
META-INF/
META-INF/MANIFEST.MF
app/Greeter.class
app/Hello.class

```
здесь `META-INF/MANIFEST.MF` это файл манифеста, содержащий стандартную часть и добавленный нами параметр `Main-Class`.

## Итоги
- исходный код программы на языке Java располагается в файлах с расширением *.java
- скомпилировать программу можно командой `javac` 
- для запуска скомпилированной программы используется команад `java`
- для запуска нужно указать `classpath` - каталог в котором будет выполняться поиск классов и точки входа, с которой начнется выполнение программы
- точкой входа в программу является класс содержащий метод `main`
- для упрощения запуска и распространения, скомпилированные файлы упаковываются в один jar-файл
- упаковка классов выполняется утилиток `jar`
- точка входа для jar-файла может быть указана заранее в параметрах манифеста
- манифест генерируется при упаковке, в манифест можно добавить параметры из внешнего файла передав его как аргумент утилиты jar
- запуск программы из jar файла выполняется командой `java -jar program.jar` имя jar-файла (program.jar) передается в качестве аргумента 

#### Ссылки по теме:
[утилита Jar](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html)
[манифест](https://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)
[Guide to Creating and Running a Jar File in Java](https://www.baeldung.com/java-create-jar)
